{{ define "main" }}
<section class="hero">
  <div class="hero-content">
    <h1 class="hero-title">
      <span class="title-burned">burned</span><span class="title-signal">signal</span>
    </h1>
    <p class="hero-tagline">{{ site.Params.tagline }}</p>
    <p class="hero-description">
      {{ if eq .Lang "ru" }}Глубокий анализ кибербезопасности, разведки и цифровой конфиденциальности.
      {{ else if eq .Lang "zh" }}关于网络安全、情报和数字隐私的深度分析。
      {{ else }}Deep dives into cybersecurity, intelligence, and digital privacy.{{ end }}
    </p>
  </div>
  <div class="hero-visual">
    <div class="terminal-window">
      <div class="terminal-header">
        <span class="terminal-dot red"></span>
        <span class="terminal-dot yellow"></span>
        <span class="terminal-dot green"></span>
      </div>
      <div class="terminal-body">
        <code>
          <span class="prompt">$</span> <span class="cmd">cat</span> signal.log<br>
          <span class="output">[INTERCEPTED] encrypted_channel_42</span><br>
          <span class="output">[DECODED] payload extracted</span><br>
          <span class="output">[SIGNAL] burned.</span><br>
          <span class="prompt">$</span> <span class="cursor">_</span>
        </code>
      </div>
    </div>
  </div>
</section>

<section class="recent-posts">
  <header class="section-header">
    <h2 class="section-title">
      {{ if eq .Lang "ru" }}Последние статьи
      {{ else if eq .Lang "zh" }}最新文章
      {{ else }}Recent Posts{{ end }}
    </h2>
    <a href="{{ "posts/" | relLangURL }}" class="view-all">
      {{ if eq .Lang "ru" }}Смотреть все
      {{ else if eq .Lang "zh" }}查看全部
      {{ else }}View all{{ end }}
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </header>

  <div class="posts-grid">
    {{ range first 6 (where .Site.RegularPages "Section" "posts") }}
    <article class="post-card">
      <a href="{{ .Permalink }}" class="post-card-link">
        <h3 class="post-card-title">{{ .Title }}</h3>
        <div class="post-card-meta">
          <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
          <span class="separator">|</span>
          <span class="reading-time">{{ .ReadingTime }} min</span>
        </div>
        {{ with .Summary }}
        <p class="post-card-summary">{{ . | plainify | truncate 120 }}</p>
        {{ end }}
        {{ with .Params.tags }}
        <div class="post-card-tags">
          {{ range first 3 . }}
          <span class="tag-pill">#{{ . }}</span>
          {{ end }}
        </div>
        {{ end }}
      </a>
    </article>
    {{ else }}
    <p class="no-posts">
      {{ if eq .Lang "ru" }}Статей пока нет.
      {{ else if eq .Lang "zh" }}暂无文章。
      {{ else }}No posts yet.{{ end }}
    </p>
    {{ end }}
  </div>
</section>

{{ $tags := .Site.Taxonomies.tags }}
{{ if gt (len $tags) 0 }}
<section class="tags-section">
  <header class="section-header">
    <h2 class="section-title">
      {{ if eq .Lang "ru" }}Теги
      {{ else if eq .Lang "zh" }}标签
      {{ else }}Tags{{ end }}
    </h2>
  </header>
  <div class="tags-cloud">
    {{ range $name, $taxonomy := $tags }}
    <a href="{{ "tags/" | relLangURL }}{{ $name | urlize }}/" class="tag-link">
      #{{ $name }}
      <span class="tag-count">{{ len $taxonomy.Pages }}</span>
    </a>
    {{ end }}
  </div>
</section>
{{ end }}
{{ end }}
